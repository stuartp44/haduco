# .copilot-instructions.md

## Project-Specific Instructions

### Critical: No Emojis
**NEVER use emojis in any files, documentation, code, or messages.**
This is a strict project requirement that applies to:
- All markdown files
- Code comments
- Commit messages
- GitHub workflows
- Templates
- Configuration files
- Any generated content

### Conventional Commits
Always use conventional commit format without emojis:
- `feat: add new feature`
- `fix: resolve bug`
- `docs: update documentation`

### Documentation Style
- Professional tone
- Clear and concise
- No decorative symbols or emojis
- Use proper markdown formatting

### Code Style
- Follow PEP 8 for Python
- Use type hints
- Write descriptive docstrings
- No emoji in comments or strings
- Run `ruff check . --fix` to auto-fix linting issues
- Run `ruff format .` to format code
- Run `mypy custom_components/duco_ventilation_sun_control` for type checking
- Always ensure code passes all checks before committing

### Library vs Integration Responsibility
When encountering issues, determine the appropriate layer to fix:

**Library (ducopy) should handle:**
- Board generation detection and API differences
- Normalizing API response formats between board types (e.g., `{"Val": x}` vs raw values)
- HTTP quirks and protocol differences (HTTPS vs HTTP, malformed headers)
- Providing consistent, normalized data structures regardless of board generation
- Injecting missing but derivable fields (e.g., IP from base_url)
- All board-specific API implementation details

**Integration (haduco) should handle:**
- Home Assistant-specific concerns (config flow, entities, coordinator)
- Storing and managing config entries
- UI/UX for discovery and configuration
- Entity state management and updates
- Home Assistant service calls and options

**Rule of thumb:** If the issue involves differences between Connectivity Board and Communication/Print Board API formats, fix it in the library to provide a normalized interface. Only implement workarounds in the integration if the library cannot reasonably abstract the difference.
